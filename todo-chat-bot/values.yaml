# Default values for todo-chat-bot
# This is a YAML-formatted file for local Minikube deployment

# Backend Configuration
backend:
  enabled: true
  replicaCount: 1

  image:
    repository: todo-backend
    pullPolicy: Never  # Use local images in Minikube
    tag: "latest"

  service:
    type: NodePort  # Use NodePort for local Minikube access
    port: 8001
    targetPort: 8001
    nodePort: 30001  # Fixed NodePort for easy access

  env:
    - name: DATABASE_URL
      value: "sqlite:///./data/todos.db"
    - name: BETTER_AUTH_SECRET
      value: "minikube-local-secret-key-minimum-32-characters-long-for-testing"
    - name: JWT_ALGORITHM
      value: "HS256"
    - name: JWT_EXPIRATION_DAYS
      value: "7"
    - name: HOST
      value: "0.0.0.0"
    - name: PORT
      value: "8001"

  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 250m
      memory: 256Mi

  livenessProbe:
    httpGet:
      path: /docs
      port: 8001
    initialDelaySeconds: 30
    periodSeconds: 10

  readinessProbe:
    httpGet:
      path: /docs
      port: 8001
    initialDelaySeconds: 10
    periodSeconds: 5

# Frontend Configuration
frontend:
  enabled: true
  replicaCount: 1

  image:
    repository: todo-frontend
    pullPolicy: Never  # Use local images in Minikube
    tag: "latest"

  service:
    type: NodePort  # Use NodePort for local Minikube access
    port: 3000
    targetPort: 3000
    nodePort: 30000  # Fixed NodePort for easy access

  env:
    - name: NEXT_PUBLIC_API_URL
      value: "http://localhost:30001"  # Points to backend NodePort
    - name: NODE_ENV
      value: "production"

  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 250m
      memory: 256Mi

  livenessProbe:
    httpGet:
      path: /
      port: 3000
    initialDelaySeconds: 30
    periodSeconds: 10

  readinessProbe:
    httpGet:
      path: /
      port: 3000
    initialDelaySeconds: 10
    periodSeconds: 5

# Service Account
serviceAccount:
  create: true
  automount: true
  annotations: {}
  name: ""

# Pod Annotations and Labels
podAnnotations: {}
podLabels: {}

podSecurityContext: {}
securityContext: {}

# Ingress (disabled for local Minikube)
ingress:
  enabled: false

# Autoscaling (disabled for local deployment)
autoscaling:
  enabled: false

# Node selector, tolerations, and affinity
nodeSelector: {}
tolerations: []
affinity: {}

# Persistent Volume for Backend Database (optional)
persistence:
  enabled: false
  storageClass: "standard"
  accessMode: ReadWriteOnce
  size: 1Gi
